# ðŸ“Š Trenduity ë ˆí¬ì§€í† ë¦¬ ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸

**ë¶„ì„ ë‚ ì§œ**: 2025ë…„ 12ì›” 19ì¼
**ë¶„ì„ ëŒ€ìƒ**: Trenduity - 50-70ëŒ€ ì‹œë‹ˆì–´ ë””ì§€í„¸ ë¦¬í„°ëŸ¬ì‹œ í•™ìŠµ í”Œëž«í¼
**ë ˆí¬ì§€í† ë¦¬**: https://github.com/aiden238/Trenduity

---

## ðŸ“‘ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ ê²€ì¦](#ê¸°ìˆ -ìŠ¤íƒ-ê²€ì¦)
3. [ì£¼ìš” ë¬¸ì œì  ë¶„ì„](#ì£¼ìš”-ë¬¸ì œì -ë¶„ì„)
4. [ìœ„í—˜ë„ í‰ê°€](#ìœ„í—˜ë„-í‰ê°€)
5. [ê¶Œìž¥ ê°œì„  ì‚¬í•­](#ê¶Œìž¥-ê°œì„ -ì‚¬í•­)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ðŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

**ë°±ì—”ë“œ**
- FastAPI (Python 3.11)
- Supabase (PostgreSQL + Auth)
- Redis (ìºì‹± ë° ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…)

**í”„ë¡ íŠ¸ì—”ë“œ**
- **ì›¹**: Next.js 14 + React 19.1.0
- **ëª¨ë°”ì¼**: React Native 0.81.5 (Expo 54) + React 19.1.0

**AI/ML**
- OpenAI GPT-5 (nano, mini)
- Google Gemini 2.0/2.5

**ì¸í”„ë¼**
- Docker (Dockerfile)
- Railway (ë°°í¬)

### ðŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
Trenduity/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ mobile-expo/      # React Native ëª¨ë°”ì¼ ì•±
â”‚   â””â”€â”€ web-next/         # Next.js ì›¹ ì•±
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ types/            # ê³µìœ  íƒ€ìž… ì •ì˜
â”‚   â””â”€â”€ ui/               # ê³µìœ  UI ì»´í¬ë„ŒíŠ¸
â””â”€â”€ services/
    â””â”€â”€ bff-fastapi/      # BFF API ì„œë²„ (FastAPI)
```

### ðŸ“Š ì½”ë“œ í†µê³„
- **í…ŒìŠ¤íŠ¸ íŒŒì¼**: 15ê°œ (ëŒ€ë¶€ë¶„ E2E í…ŒìŠ¤íŠ¸)
- **TODO/FIXME ì£¼ì„**: 58ê°œ íŒŒì¼
- **Console ë¡œê·¸**: 213ê°œ (56ê°œ íŒŒì¼)
- **ì´ ì½”ë“œë² ì´ìŠ¤**: ~50ê°œ Python íŒŒì¼, ~50ê°œ TypeScript/TSX íŒŒì¼

---

## ê¸°ìˆ  ìŠ¤íƒ ê²€ì¦

### âœ… ê²€ì¦ëœ ê¸°ìˆ  (2025ë…„ 12ì›” ê¸°ì¤€)

| ê¸°ìˆ  | ì‚¬ìš© ë²„ì „ | ìµœì‹  ë²„ì „ | ìƒíƒœ | ë¹„ê³  |
|------|-----------|-----------|------|------|
| React | 19.1.0 | 19.2.0 | âœ… ì•ˆì • | [2025ë…„ 3ì›” ì¶œì‹œ](https://react.dev/blog/2025/10/01/react-19-2) |
| React Native | 0.81.5 | 0.83.1 | âš ï¸ EOL | [2025ë…„ 10ì›” ì¶œì‹œ, End of Cycle](https://github.com/facebook/react-native/releases) |
| Next.js | 14.2.33 | 15.1.x | âš ï¸ êµ¬ë²„ì „ | 14.xëŠ” ì—¬ì „ížˆ ì§€ì›ë˜ì§€ë§Œ 15.x ê¶Œìž¥ |
| GPT-5-nano | gpt-5-nano | gpt-5-nano | âœ… ìµœì‹  | [2025ë…„ 8ì›” ì¶œì‹œ](https://platform.openai.com/docs/models/gpt-5-nano) |
| GPT-5-mini | gpt-5-mini | gpt-5-mini | âœ… ìµœì‹  | [2025ë…„ 8ì›” ì¶œì‹œ](https://platform.openai.com/docs/models/gpt-5-mini) |
| FastAPI | 0.104.0 | 0.115.x | âš ï¸ êµ¬ë²„ì „ | ë³´ì•ˆ íŒ¨ì¹˜ í•„ìš” |
| Python | 3.11 | 3.13 | âœ… ì•ˆì • | 3.11ì€ ì—¬ì „ížˆ LTS |

**ì£¼ìš” ë°œê²¬ì‚¬í•­**:
- React 19.1.0ì€ ì •ìƒì ì¸ ì•ˆì • ë²„ì „ìž…ë‹ˆë‹¤ (ì´ì „ ë¦¬í¬íŠ¸ ìˆ˜ì •)
- GPT-5 ëª¨ë¸ëª…ì€ ì‹¤ì œë¡œ ì¡´ìž¬í•˜ëŠ” OpenAI ëª¨ë¸ìž…ë‹ˆë‹¤ (ì´ì „ ë¦¬í¬íŠ¸ ìˆ˜ì •)
- React Native 0.81.5ëŠ” ìœ íš¨í•œ ë²„ì „ì´ì§€ë§Œ **End of Cycle** ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ê¶Œìž¥

---

## ì£¼ìš” ë¬¸ì œì  ë¶„ì„

## ðŸ”´ ì‹¬ê°í•œ ë¬¸ì œ (Critical)

### 1. API í‚¤ ë³´ì•ˆ ê´€ë¦¬ ì·¨ì•½ ðŸ”

**ë¬¸ì œ:**
```python
# services/bff-fastapi/app/routers/ai.py:20-21
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "")
GOOGLE_API_KEY = os.getenv("GOOGLE_API_KEY", "")
```

**ìœ„í—˜ë„**: ðŸ”´ Critical
**ì˜í–¥**: API ë¹„ìš© í­íƒ„ ($ìˆ˜ì²œ~ìˆ˜ë§Œ ë°œìƒ ê°€ëŠ¥), ì„œë¹„ìŠ¤ ì¤‘ë‹¨, ë³´ì•ˆ ì¹¨í•´

**ë¬¸ì œì **:
1. í™˜ê²½ ë³€ìˆ˜ ë¯¸ì„¤ì • ì‹œ ë¹ˆ ë¬¸ìžì—´ë¡œ fallback
2. ëŸ°íƒ€ìž„ì—ë§Œ ì—ëŸ¬ ë°œìƒ (ì‹œìž‘ ì‹œ ê²€ì¦ ì—†ìŒ)
3. í‚¤ ë¡œí…Œì´ì…˜ ì •ì±… ë¶€ìž¬
4. Secrets Manager ë¯¸ì‚¬ìš©

**ìœ„ì¹˜**: `/services/bff-fastapi/app/routers/ai.py:20-21`

**í•´ê²° ë°©ë²•**:
```python
# 1. ì‹œìž‘ ì‹œ í•„ìˆ˜ ê²€ì¦
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
GOOGLE_API_KEY = os.getenv("GOOGLE_API_KEY")

if not OPENAI_API_KEY:
    raise ValueError("OPENAI_API_KEY is required in production")
if not GOOGLE_API_KEY:
    raise ValueError("GOOGLE_API_KEY is required in production")

# 2. AWS Secrets Manager ì‚¬ìš©
import boto3
def get_secret(secret_name):
    client = boto3.client('secretsmanager')
    return client.get_secret_value(SecretId=secret_name)['SecretString']

OPENAI_API_KEY = get_secret("trenduity/openai-api-key")
```

**ì¶”ê°€ ê¶Œìž¥ì‚¬í•­**:
- í‚¤ ë¡œí…Œì´ì…˜: 90ì¼ë§ˆë‹¤ ìžë™ êµì²´
- ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§: OpenAI/Google API ëŒ€ì‹œë³´ë“œì—ì„œ ì¼ì¼ ì§€ì¶œ í•œë„ ì„¤ì •
- ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…: ì‚¬ìš©ìžë‹¹ API í˜¸ì¶œ ì œí•œ

---

### 2. ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸ í† í° í•˜ë“œì½”ë”© ðŸš¨

**ë¬¸ì œ:**
```python
# services/bff-fastapi/app/core/deps.py:110-113
if settings.ENV == "development":
    TEST_TOKENS = {
        "test-jwt-token-for-senior-user": {"id": "demo-user-50s"},
        "test-jwt-token-for-guardian-user": {"id": "demo-guardian-50s"},
    }
```

**ìœ„í—˜ë„**: ðŸ”´ Critical
**ì˜í–¥**: í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ì¸ì¦ ìš°íšŒ ê°€ëŠ¥, ì „ì²´ ì‹œìŠ¤í…œ ë³´ì•ˆ ì¹¨í•´

**ë¬¸ì œì **:
1. `ENV=development`ê°€ í”„ë¡œë•ì…˜ì— ë°°í¬ë  ê²½ìš° ì¹˜ëª…ì 
2. CI/CDì—ì„œ í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ ë¶€ìž¬
3. í…ŒìŠ¤íŠ¸ í† í°ì´ ì½”ë“œì— í•˜ë“œì½”ë”©

**ìœ„ì¹˜**: `/services/bff-fastapi/app/core/deps.py:110-113`

**í•´ê²° ë°©ë²•**:
```python
# 1. í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ í™œì„±í™”
ALLOW_TEST_TOKENS = os.getenv("ALLOW_TEST_TOKENS", "false").lower() == "true"

if settings.ENV == "development" and ALLOW_TEST_TOKENS:
    TEST_TOKENS = {...}

# 2. CI/CDì—ì„œ í”„ë¡œë•ì…˜ ê²€ì¦
# .github/workflows/deploy.yml
- name: Validate production environment
  run: |
    if [ "$ENV" = "production" ] && [ "$ALLOW_TEST_TOKENS" = "true" ]; then
      echo "Error: Test tokens not allowed in production"
      exit 1
    fi

# 3. í”„ë¡œë•ì…˜ ì‹œìž‘ ì‹œ ìžë™ ê²€ì¦
if settings.ENV == "production" and ALLOW_TEST_TOKENS:
    raise ValueError("Test tokens are not allowed in production")
```

---

### 3. Dockerfile í¬íŠ¸ ë¶ˆì¼ì¹˜ ðŸ³

**ë¬¸ì œ:**
```dockerfile
# services/bff-fastapi/Dockerfile:24, 27
EXPOSE 8002
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8002"]
```
```bash
# .env.example:43
BFF_PORT=8000
```

**ìœ„í—˜ë„**: ðŸ”´ Critical
**ì˜í–¥**: Railway ë°°í¬ ì‹¤íŒ¨, ì„œë¹„ìŠ¤ ì ‘ê·¼ ë¶ˆê°€, í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨

**ìœ„ì¹˜**: `/services/bff-fastapi/Dockerfile:24, 27`

**í•´ê²° ë°©ë²•**:
```dockerfile
# í™˜ê²½ ë³€ìˆ˜ PORT ì‚¬ìš© (Railway ê¸°ë³¸ê°’)
EXPOSE ${PORT:-8000}
CMD ["sh", "-c", "uvicorn app.main:app --host 0.0.0.0 --port ${PORT:-8000}"]
```

```json
// railway.json ìˆ˜ì •
{
  "deploy": {
    "startCommand": "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
  }
}
```

---

### 4. React Native ë²„ì „ End of Cycle (EOL) â°

**ë¬¸ì œ:**
- React Native 0.81.5ëŠ” 2025ë…„ 8ì›” ì¶œì‹œ, **2025ë…„ 12ì›” í˜„ìž¬ End of Cycle**
- ìµœì‹  ë²„ì „ì€ 0.83.1 (2025ë…„ 12ì›” 10ì¼ ì¶œì‹œ)
- ë³´ì•ˆ íŒ¨ì¹˜ ë° ë²„ê·¸ ìˆ˜ì • ë¯¸ì œê³µ

**ìœ„í—˜ë„**: ðŸ”´ Critical
**ì˜í–¥**: ë³´ì•ˆ ì·¨ì•½ì  ë…¸ì¶œ, ìµœì‹  ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€, í˜¸í™˜ì„± ë¬¸ì œ

**í•´ê²° ë°©ë²•**:
```json
// package.json
"overrides": {
  "react": "19.1.0",        // OK
  "react-dom": "19.1.0",    // OK
  "react-native": "0.83.1", // âœ… ìµœì‹  ì•ˆì • ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
  "@types/react": "~19.1.10"
}
```

**ì—…ê·¸ë ˆì´ë“œ ì ˆì°¨**:
1. `npx react-native upgrade` ì‹¤í–‰
2. ë³€ê²½ì‚¬í•­ ê²€í†  ë° ì¶©ëŒ í•´ê²°
3. ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
4. Expo SDK í˜¸í™˜ì„± í™•ì¸

**ì°¸ê³ **: [React Native 0.83 Release Notes](https://github.com/facebook/react-native/releases)

---

## ðŸŸ¡ ì¤‘ìš”í•œ ë¬¸ì œ (High)

### 5. Redis ì—°ê²° ì‹¤íŒ¨ ì‹œ ì¡°ìš©í•œ ì‹¤íŒ¨ (Silent Failure) ðŸ“¡

**ë¬¸ì œ:**
```python
# services/bff-fastapi/app/core/deps.py:75-86
if _redis_pool is None:
    logger.warning("Redis ì—°ê²° í’€ì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. None ë°˜í™˜.")
    return None
```

**ìœ„í—˜ë„**: ðŸŸ¡ High
**ì˜í–¥**:
- ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ… ë¬´íš¨í™” â†’ DDoS ê³µê²© ì·¨ì•½
- ìºì‹± ì‹¤íŒ¨ â†’ ì„±ëŠ¥ ì €í•˜ (DB ë¶€í•˜ ì¦ê°€)
- ëª¨ë‹ˆí„°ë§ ë¶ˆê°€ â†’ ìž¥ì•  ì¸ì§€ ì§€ì—°

**ìœ„ì¹˜**: `/services/bff-fastapi/app/core/deps.py:75-86`

**í•´ê²° ë°©ë²•**:
```python
# 1. Health checkì— Redis ìƒíƒœ í¬í•¨
@app.get("/health")
async def health_check():
    redis_status = "healthy" if get_redis_client() else "unhealthy"
    if redis_status == "unhealthy" and settings.ENV == "production":
        raise HTTPException(status_code=503, detail="Redis unavailable")

    return {
        "status": "healthy",
        "redis": redis_status,
        "version": "0.1.0"
    }

# 2. Sentry ì•Œë¦¼ ì„¤ì •
import sentry_sdk
if _redis_pool is None:
    sentry_sdk.capture_message("Redis connection pool not initialized", level="error")

# 3. ì¤‘ìš” ê¸°ëŠ¥ì—ì„œëŠ” Redis í•„ìˆ˜ë¡œ ì„¤ì •
def rate_limit(user_id: str):
    redis = get_redis_client()
    if not redis:
        raise HTTPException(503, "Service temporarily unavailable")
```

---

### 6. ê³¼ë„í•œ Console ë¡œê·¸ (213ê°œ) ðŸ“

**ë¬¸ì œ:**
- ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì— 213ê°œì˜ `console.log/error/warn` ì¡´ìž¬
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì„±ëŠ¥ ì €í•˜
- ë¯¼ê° ì •ë³´ ë…¸ì¶œ ê°€ëŠ¥ì„± (í† í°, API í‚¤ ë“±)

**ìœ„í—˜ë„**: ðŸŸ¡ High
**ì˜í–¥**:
- ë¸Œë¼ìš°ì € ì„±ëŠ¥ ì €í•˜ (íŠ¹ížˆ ëª¨ë°”ì¼)
- ì½˜ì†”ì— ë¯¼ê° ì •ë³´ ë…¸ì¶œ
- ë””ë²„ê¹… ì–´ë ¤ì›€ (ë…¸ì´ì¦ˆ ê³¼ë‹¤)

**ì˜ˆì‹œ**:
```typescript
// apps/mobile-expo/src/contexts/AuthContext.tsx:18, 38 ë“±
console.log('[AuthContext] ðŸ”— Generated redirect URL:', url);
console.warn('[AuthContext] BFF URL not configured, using localhost');
```

**í•´ê²° ë°©ë²•**:

**1ë‹¨ê³„: êµ¬ì¡°í™”ëœ ë¡œê¹… ë„ìž…**
```typescript
// utils/logger.ts
import winston from 'winston';

const logger = winston.createLogger({
  level: process.env.NODE_ENV === 'production' ? 'error' : 'debug',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.Console({
      format: winston.format.simple(),
    }),
  ],
});

// ë¯¼ê° ì •ë³´ í•„í„°ë§
const sanitize = (msg: string) => {
  return msg.replace(/Bearer [A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*/g, 'Bearer [REDACTED]');
};

export const log = {
  info: (msg: string, meta?: any) => logger.info(sanitize(msg), meta),
  error: (msg: string, meta?: any) => logger.error(sanitize(msg), meta),
  warn: (msg: string, meta?: any) => logger.warn(sanitize(msg), meta),
  debug: (msg: string, meta?: any) => logger.debug(sanitize(msg), meta),
};
```

**2ë‹¨ê³„: í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹œ console.log ì œê±°**
```javascript
// babel.config.js
module.exports = {
  plugins: [
    process.env.NODE_ENV === 'production' && 'transform-remove-console',
  ].filter(Boolean),
};
```

---

### 7. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¶€ì¡± âœ…

**ë¬¸ì œ:**
- í…ŒìŠ¤íŠ¸ íŒŒì¼: 15ê°œ (ëŒ€ë¶€ë¶„ E2E)
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê±°ì˜ ì—†ìŒ
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ ë¶€ë¶„ì 
- í”„ë¡ íŠ¸ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì—†ìŒ

**ìœ„í—˜ë„**: ðŸŸ¡ High
**ì˜í–¥**:
- ë²„ê·¸ ì¡°ê¸° ë°œê²¬ ë¶ˆê°€
- ë¦¬íŒ©í† ë§ ì–´ë ¤ì›€ (íšŒê·€ í…ŒìŠ¤íŠ¸ ë¶€ìž¬)
- ì½”ë“œ ì‹ ë¢°ë„ ì €í•˜

**í˜„ìž¬ ìƒíƒœ**:
```bash
Trenduity/
â””â”€â”€ services/bff-fastapi/tests/
    â”œâ”€â”€ e2e/  # E2E í…ŒìŠ¤íŠ¸ 5ê°œ
    â””â”€â”€ test_*.py  # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 10ê°œ
```

**í•´ê²° ë°©ë²•**:

**1ë‹¨ê³„: ë°±ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (pytest)**
```python
# tests/test_ai_router.py
import pytest
from app.routers.ai import call_openai_api

@pytest.mark.asyncio
async def test_call_openai_api():
    messages = [{"role": "user", "content": "Hello"}]
    result = await call_openai_api(messages, model="gpt-5-nano")
    assert "response" in result
    assert result["tokens_used"] > 0
```

**2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Jest + React Testing Library)**
```typescript
// apps/mobile-expo/src/contexts/__tests__/AuthContext.test.tsx
import { renderHook, act } from '@testing-library/react-hooks';
import { useAuth } from '../AuthContext';

describe('AuthContext', () => {
  it('should login successfully', async () => {
    const { result } = renderHook(() => useAuth());

    await act(async () => {
      await result.current.login('test@example.com', 'password');
    });

    expect(result.current.status).toBe('authenticated');
  });
});
```

**3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ ì„¤ì •**
```json
// package.json
{
  "scripts": {
    "test:coverage": "jest --coverage --coverageThreshold='{\"global\":{\"lines\":70}}'"
  }
}
```

**4ë‹¨ê³„: CI/CDì— í•„ìˆ˜ í†µê³¼ ì¡°ê±´ ì¶”ê°€**
```yaml
# .github/workflows/ci.yml
- name: Run tests
  run: npm test -- --coverage
- name: Check coverage
  run: |
    if [ $(cat coverage/coverage-summary.json | jq '.total.lines.pct') -lt 70 ]; then
      echo "Coverage below 70%"
      exit 1
    fi
```

---

## ðŸŸ¢ ê°œì„  ê¶Œìž¥ ì‚¬í•­ (Medium)

### 8. CORS ì„¤ì • ê³¼ë„í•˜ê²Œ ê´€ëŒ€ ðŸŒ

**ë¬¸ì œ:**
```python
# services/bff-fastapi/app/core/config.py:36-44
CORS_ORIGINS: List[str] = [
    "http://localhost:3000",
    "http://localhost:3001",
    "http://localhost:3002",
    "http://localhost:3003",
    "http://localhost:3004",
    "http://localhost:3005",
    "http://localhost:19006"
]
```

**ìœ„í—˜ë„**: ðŸŸ¢ Medium
**ì˜í–¥**: CSRF ê³µê²© ê°€ëŠ¥ì„±, í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œë„ ë¡œì»¬í˜¸ìŠ¤íŠ¸ í—ˆìš©

**ìœ„ì¹˜**: `/services/bff-fastapi/app/core/config.py:36-44`

**í•´ê²° ë°©ë²•**:
```python
# í™˜ê²½ë³„ CORS ì„¤ì •
if settings.ENV == "production":
    CORS_ORIGINS = [
        "https://trenduity.com",
        "https://www.trenduity.com",
        "https://app.trenduity.com"
    ]
elif settings.ENV == "staging":
    CORS_ORIGINS = [
        "https://staging.trenduity.com",
        "http://localhost:3000"
    ]
else:
    CORS_ORIGINS = [
        "http://localhost:3000",
        "http://localhost:19006"
    ]
```

---

### 9. í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ ë¯¸í¡ âš™ï¸

**ë¬¸ì œ:**
```python
# services/bff-fastapi/app/core/config.py:147-155
if settings.ENV == "production":
    raise  # í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¦‰ì‹œ ì¢…ë£Œ
else:
    print("[WARNING] ê°œë°œ í™˜ê²½ì´ë¯€ë¡œ ê²½ê³ ë§Œ í‘œì‹œí•©ë‹ˆë‹¤.")
```

**ìœ„í—˜ë„**: ðŸŸ¢ Medium
**ì˜í–¥**: ê°œë°œ í™˜ê²½ì—ì„œ í•„ìˆ˜ ë³€ìˆ˜ ëˆ„ë½ ì‹œ ëŸ°íƒ€ìž„ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥

**ìœ„ì¹˜**: `/services/bff-fastapi/app/core/config.py:147-155`

**í•´ê²° ë°©ë²•**:
```python
# ëª¨ë“  í™˜ê²½ì—ì„œ í•„ìˆ˜ ë³€ìˆ˜ ê²€ì¦
REQUIRED_VARS_ALL_ENV = [
    "SUPABASE_URL",
    "SUPABASE_SERVICE_ROLE_KEY",
    "REDIS_URL"
]

for var in REQUIRED_VARS_ALL_ENV:
    if not getattr(settings, var):
        if settings.ENV == "production":
            raise ValueError(f"{var} is required in production")
        else:
            logger.warning(f"{var} is not set (development mode)")
```

---

### 10. TypeScript strict ëª¨ë“œ ê°œì„  ðŸ“

**ë¬¸ì œ:**
```json
// tsconfig.base.json
"skipLibCheck": true,  // íƒ€ìž… ì•ˆì •ì„± ì €í•˜
```

**ìœ„í—˜ë„**: ðŸŸ¢ Medium
**ì˜í–¥**: íƒ€ìž… ì˜¤ë¥˜ ë¯¸ë°œê²¬, ëŸ°íƒ€ìž„ ì—ëŸ¬ ê°€ëŠ¥ì„±

**ìœ„ì¹˜**: `/tsconfig.base.json:9`

**í•´ê²° ë°©ë²•**:
```json
{
  "compilerOptions": {
    "strict": true,
    "skipLibCheck": false,              // âœ… ëª¨ë“  íƒ€ìž… ê²€ì¦
    "strictNullChecks": true,           // âœ… null/undefined ì—„ê²© ì²´í¬
    "strictFunctionTypes": true,        // âœ… í•¨ìˆ˜ íƒ€ìž… ì—„ê²© ì²´í¬
    "noImplicitAny": true,              // âœ… any íƒ€ìž… ê¸ˆì§€
    "noUnusedLocals": true,             // âœ… ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ ê²½ê³ 
    "noUnusedParameters": true,         // âœ… ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„° ê²½ê³ 
    "noImplicitReturns": true           // âœ… ë¦¬í„´ íƒ€ìž… ëª…ì‹œ ê°•ì œ
  }
}
```

---

### 11. ì½”ë“œ ì¤‘ë³µ (DRY ì›ì¹™ ìœ„ë°˜) ðŸ”

**ë¬¸ì œ:**
- ìœ ì‚¬í•œ API í˜¸ì¶œ ë¡œì§ ë°˜ë³µ (AuthContext.tsx)
- ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ ì¤‘ë³µ
- `fetchWithTimeout` í•¨ìˆ˜ëŠ” ì¢‹ì§€ë§Œ ì—¬ëŸ¬ ê³³ì— ë³µì‚¬ë¨

**ì˜ˆì‹œ:**
```typescript
// apps/mobile-expo/src/contexts/AuthContext.tsx
// ìœ ì‚¬í•œ íŒ¨í„´ì´ login, signup, socialLoginì—ì„œ ë°˜ë³µ
const response = await fetchWithTimeout(`${BFF_URL}/v1/auth/...`, {...}, 30000);
const result = await response.json();
if (!result.ok) {
    throw new Error(result.error?.message || '...');
}
```

**ìœ„í—˜ë„**: ðŸŸ¢ Medium
**ì˜í–¥**: ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€, ë²„ê·¸ ìˆ˜ì • ì‹œ ì—¬ëŸ¬ ê³³ ìˆ˜ì • í•„ìš”

**í•´ê²° ë°©ë²•**:
```typescript
// api/client.ts
import axios from 'axios';

const apiClient = axios.create({
  baseURL: process.env.EXPO_PUBLIC_BFF_API_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// ìš”ì²­ ì¸í„°ì…‰í„°: í† í° ìžë™ ì¶”ê°€
apiClient.interceptors.request.use(async (config) => {
  const token = await AsyncStorage.getItem('@trenduity/auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// ì‘ë‹µ ì¸í„°ì…‰í„°: ì—ëŸ¬ ì²˜ë¦¬ í†µì¼
apiClient.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.code === 'ECONNABORTED') {
      throw new Error('ì„œë²„ ì—°ê²° ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
    if (error.response?.status === 401) {
      throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    throw new Error(error.response?.data?.error?.message || 'ìš”ì²­ ì‹¤íŒ¨');
  }
);

// ì‚¬ìš© ì˜ˆì‹œ
export const authAPI = {
  login: (email: string, password: string) =>
    apiClient.post('/v1/auth/login', { email, password }),
  signup: (email: string, password: string) =>
    apiClient.post('/v1/auth/signup', { email, password }),
};
```

---

### 12. TODO/FIXME ì£¼ì„ ê´€ë¦¬ ðŸ“Œ

**ë¬¸ì œ:**
- 58ê°œ íŒŒì¼ì— TODO, FIXME, HACK ì£¼ì„ ì¡´ìž¬
- ì™„ë£Œ ì—¬ë¶€ ì¶”ì  ì–´ë ¤ì›€
- ê¸°ìˆ  ë¶€ì±„ ì¶•ì 

**ìœ„í—˜ë„**: ðŸŸ¢ Medium
**ì˜í–¥**: ìž¥ê¸°ì  ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€

**í•´ê²° ë°©ë²•**:

**1ë‹¨ê³„: TODO ì£¼ì„ ì¶”ì¶œ**
```bash
# TODO ëª©ë¡ ì¶”ì¶œ
grep -r "TODO\|FIXME\|HACK" --include="*.ts" --include="*.tsx" --include="*.py" > todos.txt
```

**2ë‹¨ê³„: GitHub Issuesë¡œ ì „í™˜**
```bash
# gh CLI ì‚¬ìš©
while IFS= read -r line; do
  file=$(echo $line | cut -d':' -f1)
  todo=$(echo $line | cut -d':' -f2-)
  gh issue create --title "TODO: $todo" --body "File: $file" --label "tech-debt"
done < todos.txt
```

**3ë‹¨ê³„: í”„ë¡œì íŠ¸ ë³´ë“œ êµ¬ì„±**
- Backlog: ìš°ì„ ìˆœìœ„ ë‚®ìŒ
- To Do: ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸
- In Progress: í˜„ìž¬ ìž‘ì—… ì¤‘
- Done: ì™„ë£Œ

---

## ðŸ”µ ë‚®ì€ ìš°ì„ ìˆœìœ„ (Low)

### 13. ESLint ê·œì¹™ ëŠìŠ¨í•¨

**ë¬¸ì œ:**
```javascript
// .eslintrc.js:26
'@typescript-eslint/no-unused-vars': ['warn', { argsIgnorePattern: '^_' }],
```

**í•´ê²° ë°©ë²•**:
```javascript
'@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
'no-console': 'error',  // console.log ê¸ˆì§€
```

---

### 14. FastAPI ë²„ì „ êµ¬ë²„ì „

**ë¬¸ì œ:**
```txt
# requirements.txt
fastapi==0.104.0  # ìµœì‹ : 0.115.x
```

**í•´ê²° ë°©ë²•**:
```txt
fastapi==0.115.0
uvicorn[standard]==0.24.0  # ìµœì‹ : 0.32.x
pydantic==2.4.0  # ìµœì‹ : 2.10.x
```

---

### 15. Next.js ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ê¶Œìž¥

**ë¬¸ì œ:**
- Next.js 14.2.33 ì‚¬ìš© ì¤‘
- ìµœì‹ : Next.js 15.1.x
- App Router ì„±ëŠ¥ ê°œì„ , Turbopack ì•ˆì •í™”

**í•´ê²° ë°©ë²•**:
```bash
npm install next@latest react@latest react-dom@latest
```

---

## ìœ„í—˜ë„ í‰ê°€

| ìˆœìœ„ | ë¬¸ì œ | ìœ„í—˜ë„ | ì˜í–¥ë„ | ê¸´ê¸‰ë„ | ìš°ì„ ìˆœìœ„ |
|------|------|--------|--------|--------|----------|
| 1 | API í‚¤ ë³´ì•ˆ ê´€ë¦¬ ì·¨ì•½ | ðŸ”´ Critical | ë†’ìŒ | ì¦‰ì‹œ | P0 |
| 2 | í…ŒìŠ¤íŠ¸ í† í° í•˜ë“œì½”ë”© | ðŸ”´ Critical | ë†’ìŒ | ì¦‰ì‹œ | P0 |
| 3 | Dockerfile í¬íŠ¸ ë¶ˆì¼ì¹˜ | ðŸ”´ Critical | ì¤‘ê°„ | ì¦‰ì‹œ | P0 |
| 4 | React Native EOL | ðŸ”´ Critical | ì¤‘ê°„ | 1ì£¼ | P1 |
| 5 | Redis ì‹¤íŒ¨ ì²˜ë¦¬ | ðŸŸ¡ High | ì¤‘ê°„ | 1ê°œì›” | P2 |
| 6 | Console ë¡œê·¸ ê³¼ë‹¤ | ðŸŸ¡ High | ë‚®ìŒ | 1ê°œì›” | P2 |
| 7 | í…ŒìŠ¤íŠ¸ ë¶€ì¡± | ðŸŸ¡ High | ë†’ìŒ | 3ê°œì›” | P3 |
| 8 | CORS ì„¤ì • | ðŸŸ¢ Medium | ë‚®ìŒ | 3ê°œì›” | P3 |
| 9 | í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ | ðŸŸ¢ Medium | ë‚®ìŒ | 3ê°œì›” | P3 |
| 10 | TypeScript ì„¤ì • | ðŸŸ¢ Medium | ë‚®ìŒ | 6ê°œì›” | P4 |

---

## ê¶Œìž¥ ê°œì„  ì‚¬í•­

### ðŸ“… ì¦‰ì‹œ ìˆ˜ì • í•„ìš” (1ì£¼ ì´ë‚´) - P0

**1. API í‚¤ ë³´ì•ˆ ê°•í™”**
- [ ] AWS Secrets Manager ë„ìž…
- [ ] ì‹œìž‘ ì‹œ í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
- [ ] OpenAI/Google API ì‚¬ìš©ëŸ‰ í•œë„ ì„¤ì •

**2. í…ŒìŠ¤íŠ¸ í† í° í™˜ê²½ ê²©ë¦¬**
- [ ] `ALLOW_TEST_TOKENS` í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€
- [ ] CI/CD í”„ë¡œë•ì…˜ ê²€ì¦ ì¶”ê°€
- [ ] í”„ë¡œë•ì…˜ ì‹œìž‘ ì‹œ ìžë™ ê²€ì¦

**3. Dockerfile í¬íŠ¸ í†µì¼**
- [ ] í™˜ê²½ ë³€ìˆ˜ `PORT` ì‚¬ìš©
- [ ] Railway ë°°í¬ í…ŒìŠ¤íŠ¸

---

### ðŸ“… ë‹¨ê¸° ê°œì„  (1ê°œì›” ì´ë‚´) - P1

**4. React Native ì—…ê·¸ë ˆì´ë“œ**
- [ ] 0.81.5 â†’ 0.83.1 ì—…ê·¸ë ˆì´ë“œ
- [ ] Expo SDK í˜¸í™˜ì„± í™•ì¸
- [ ] ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

**5. ëª¨ë‹ˆí„°ë§ ì„¤ì •**
- [ ] Sentry ì—°ë™ (ì—ëŸ¬ ì¶”ì )
- [ ] Redis ìƒíƒœ ëª¨ë‹ˆí„°ë§
- [ ] API ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§ (Datadog/New Relic)

**6. ë¡œê¹… ê°œì„ **
- [ ] Winston/Pino ë„ìž…
- [ ] í™˜ê²½ë³„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •
- [ ] í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹œ console.log ì œê±°

---

### ðŸ“… ì¤‘ê¸° ê°œì„  (3ê°œì›” ì´ë‚´) - P2~P3

**7. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ**
- [ ] ë°±ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìž‘ì„± (ëª©í‘œ: 70%)
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìž‘ì„± (ëª©í‘œ: 60%)
- [ ] CI/CD í•„ìˆ˜ í†µê³¼ ì¡°ê±´ ì¶”ê°€

**8. ì½”ë“œ í’ˆì§ˆ ê°œì„ **
- [ ] ESLint ê·œì¹™ ê°•í™” (`warn` â†’ `error`)
- [ ] TypeScript strict ëª¨ë“œ í™œì„±í™”
- [ ] ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤ ì •ë¦½

**9. ë³´ì•ˆ ê°•í™”**
- [ ] CORS í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬
- [ ] í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ ê°•í™”
- [ ] OWASP Top 10 ë³´ì•ˆ ì ê²€

---

### ðŸ“… ìž¥ê¸° ê°œì„  (6ê°œì›” ì´ë‚´) - P4

**10. ë¦¬íŒ©í† ë§**
- [ ] DRY ì›ì¹™ ì ìš© (API í´ë¼ì´ì–¸íŠ¸ í†µì¼)
- [ ] ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì •ë¦¬
- [ ] TODO ì£¼ì„ â†’ GitHub Issues ì „í™˜

**11. ì„±ëŠ¥ ìµœì í™”**
- [ ] ë²ˆë“¤ í¬ê¸° ì¶•ì†Œ (Code Splitting)
- [ ] ì´ë¯¸ì§€ ìµœì í™” (WebP, AVIF)
- [ ] ìºì‹± ì „ëžµ ê°œì„  (CDN, Service Worker)

**12. ì¸í”„ë¼ ê°œì„ **
- [ ] Docker Compose ë¡œì»¬ í™˜ê²½ êµ¬ì„±
- [ ] GitHub Actions CI/CD ê°•í™”
- [ ] ìŠ¤í…Œì´ì§• í™˜ê²½ êµ¬ì¶•

---

## ê²°ë¡ 

### âœ… ê°•ì 

1. **í˜„ëŒ€ì ì¸ ê¸°ìˆ  ìŠ¤íƒ**: React 19, GPT-5, Gemini 2.0 ë“± ìµœì‹  ê¸°ìˆ  í™œìš©
2. **Monorepo êµ¬ì¡°**: ì½”ë“œ ìž¬ì‚¬ìš©ì„± ë†’ìŒ, íƒ€ìž… ê³µìœ  ìš©ì´
3. **AI í†µí•©**: OpenAIì™€ Google Gemini ë™ì‹œ ì‚¬ìš©ìœ¼ë¡œ ìœ ì—°ì„± í™•ë³´
4. **ì ‘ê·¼ì„± ê³ ë ¤**: ì‹œë‹ˆì–´ë¥¼ ìœ„í•œ 3ë‹¨ê³„ ì ‘ê·¼ì„± ëª¨ë“œ (Normal/Easy/Ultra)

### âš ï¸ ì•½ì 

1. **ë³´ì•ˆ**: API í‚¤ ê´€ë¦¬, í…ŒìŠ¤íŠ¸ í† í° í•˜ë“œì½”ë”© ë“± ë³´ì•ˆ ì·¨ì•½ì 
2. **í…ŒìŠ¤íŠ¸**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¶€ì¡±ìœ¼ë¡œ ì½”ë“œ ì‹ ë¢°ë„ ì €í•˜
3. **ëª¨ë‹ˆí„°ë§**: ì—ëŸ¬ ì¶”ì  ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ë¶€ìž¬
4. **ë²„ì „ ê´€ë¦¬**: React Native EOL, FastAPI êµ¬ë²„ì „ ë“± ì—…ë°ì´íŠ¸ í•„ìš”

### ðŸŽ¯ í•µì‹¬ ê¶Œìž¥ì‚¬í•­

**ì¦‰ì‹œ ì¡°ì¹˜ (P0)**:
1. API í‚¤ â†’ AWS Secrets Manager
2. í…ŒìŠ¤íŠ¸ í† í° â†’ í™˜ê²½ ê²©ë¦¬
3. Dockerfile â†’ í¬íŠ¸ í†µì¼

**ë‹¨ê¸° ì¡°ì¹˜ (P1)**:
4. React Native â†’ 0.83.1 ì—…ê·¸ë ˆì´ë“œ
5. Sentry â†’ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
6. Winston â†’ êµ¬ì¡°í™”ëœ ë¡œê¹…

**ì¤‘ìž¥ê¸° ì¡°ì¹˜ (P2~P4)**:
7. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 70%
8. ì½”ë“œ ë¦¬íŒ©í† ë§ (DRY ì›ì¹™)
9. ì„±ëŠ¥ ìµœì í™”

---

## ì°¸ê³  ìžë£Œ

### ê³µì‹ ë¬¸ì„œ
- [React 19.2](https://react.dev/blog/2025/10/01/react-19-2)
- [React Native 0.83](https://github.com/facebook/react-native/releases)
- [OpenAI GPT-5 Models](https://platform.openai.com/docs/models)
- [Next.js Documentation](https://nextjs.org/docs)

### ë³´ì•ˆ ê°€ì´ë“œ
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [AWS Secrets Manager Best Practices](https://docs.aws.amazon.com/secretsmanager/latest/userguide/best-practices.html)

### í…ŒìŠ¤íŠ¸
- [Pytest Documentation](https://docs.pytest.org/)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)

---

**ìž‘ì„±ìž**: Claude (AI ì½”ë“œ ë¶„ì„ ë„êµ¬)
**ë¶„ì„ ë‚ ì§œ**: 2025ë…„ 12ì›” 19ì¼
**ë ˆí¬ì§€í† ë¦¬**: https://github.com/aiden238/Trenduity
**ë¬¸ì„œ ë²„ì „**: 2.0 (2025-12-19 ì—…ë°ì´íŠ¸)
